"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9703],{37264:function(e,t,i){i.d(t,{HQ:function(){return s},k2:function(){return u},mV:function(){return a},mg:function(){return r},um:function(){return l},wF:function(){return o}});var n=i(70347);let s=e=>(0,n.Z)("v1/uplus/live-class-review/",{requestType:"POST",body:{live_class_uid:e.live_class_uid,is_liked:e.is_liked,review_text:e.review_text,suggestions:e.suggestions}}),a=e=>(0,n.Z)("v1/post/".concat(e,"/track/"),{requestType:"POST"}),l=e=>(0,n.Z)("v1/uplus/classes/".concat(e,"/watched/"),{requestType:"POST"}),o=e=>{let{programmeUid:t,enroll:i}=e;return(0,n.Z)("v2/uplus/programmes/".concat(t,"/save/"),{requestType:"POST",body:{enroll:i}})},r=e=>{let{userName:t}=e;return(0,n.Z)("v1/user/".concat(t,"/follow/?is_community_ass_enabled=true"),{requestType:"POST"})},u=e=>{let{userName:t}=e;return(0,n.Z)("v1/user/".concat(t,"/unfollow/?is_community_ass_enabled=true"),{requestType:"POST"})}},74869:function(e,t,i){var n=i(51513),s=i(87976),a=i(43221);t.Z=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,s.Z)(a.Up),{data:i,...l}=(0,n.Z)(e&&t?"v1/user/".concat(t,"/watch_time/progress/?is_limit_special_class_consumption_exp=True"):null);return{classroomConsumption:i,...l}}},76389:function(e,t,i){var n=i(51513),s=i(67294);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{unLiveURL:null==e?void 0:e.unliveUrl,subjectiveTestEvalURL:null==e?void 0:e.subjectiveTestSeriesUrl,liveMentoringUrl:null==e?void 0:e.liveRoom1On1Url,liveRoomRecordingUrl:null==e?void 0:e.liveRoomRecordingUrl,doubtsBrowseUrl:null==e?void 0:e.doubtBrowseUrl,lmpAddToCanvas:null==e?void 0:e.lmpAddToCanvasEnable,lmpWebUrl:null==e?void 0:e.lmpWebUrl,educatorDriveUrl:null==e?void 0:e.educatorDriveUrl}},l=e=>{let{data:t,...i}=(0,n.Z)("v1/constants/extras/"),l=(0,s.useMemo)(()=>t?a(t):{},[t]);return"function"==typeof e?e(l):{urls:l,...i}};t.Z=l},9685:function(e,t,i){i.d(t,{I:function(){return s},Q:function(){return n}});let n=e=>e?e.dailyWatchLimit-e.todayWatchTime:null,s=e=>e?e.dailyWatchLimit:null},28638:function(e,t,i){i.d(t,{DL:function(){return l},Rb:function(){return r},jk:function(){return o},lQ:function(){return s},vN:function(){return a},yB:function(){return n}});let n=e=>e.liveMentoringUrl,s=e=>e.unLiveURL,a=e=>e.lmpWebUrl,l=e=>e.doubtsBrowseUrl,o=e=>e.subjectiveTestEvalURL,r=e=>e.lmpAddToCanvas},45590:function(e,t,i){i.r(t),i.d(t,{default:function(){return ef}});var n=i(35944),s=i(67294),a=i(16829),l=i(82285);let o=(e,t)=>{let{direction:i,active:s,children:a,...o}=e;return(0,n.tZ)(l.Z,{direction:i,in:s,ref:t,...o,children:a})};var r=s.forwardRef(o),u=i(66331),d=i(71836),c=i(53434),v=i(17960),h=i(91317),m=i(37264),p=i(76389),f=i(28638),g=i(51197),E=i(25443),S=i(26514),_=i(58940),w=i(32629),T=i(22995),D=i(62378),Z=i(11089),y=i(9707),C=i(87976),L=i(43221),I=i(72552),W=i(69818),U=i(19820),b=i(7484),A=i(20987);let R=(e,t,i)=>{var n,s;let a=(0,A.Pt)(t,i);return a&&(null===(n=null==e?void 0:e.split("/v")[1])||void 0===n?void 0:n.split("/")[0])!==(null===(s=null==a?void 0:a.split("/v")[1])||void 0===s?void 0:s.split("/")[0])?a:e},P=e=>{var t;let{uid:i,goalUid:n,name:s,slidesPdf:a={},programme:l={},programmeType:o=1,author:r={},classType:u=1,recordedType:d,liveAt:c,rank:v,state:h,secondsBeforeLive:m=0,duration:p,videoDuration:f,lessonDuration:g,finishedAt:E,startedAt:S,isSaved:_=!1,videoUrl:w,liveClassUrl:T,preview:D,llhls:Z}=e,y=f||g||p||0,C={preview:D,name:s,uid:i,liveAt:c,live_at:c,rank:v,state:h,author:{uid:r.uid,username:r.username,first_name:r.firstName,last_name:r.lastName,avatar:r.thumbnail||r.avatar||r.avatarV1},startedAt:S,finishedAt:E,isSaved:_,secondsBeforeLive:m,programmeType:o,classType:u,recordedType:d,videoUrl:w,liveClassUrl:T,lessonDuration:y,videoDuration:y,goalUid:n||(null===(t=l.goal)||void 0===t?void 0:t.uid),isEnrolled:l.isEnrolled||!1,programme:{name:l.name||"",isSpecial:l.isSpecial||!1},slides:{withAnnotations:(null==a?void 0:a.withAnnotations)||(null==a?void 0:a.withAnnotation)||null,withoutAnnotations:(null==a?void 0:a.withoutAnnotations)||(null==a?void 0:a.noAnnotation)||null},course:{title:l.name},llhls:Z};return C},k=(e,t,i,n)=>{let s=R(t,e,i);if(s){let a=s.split("?")[0];s=a}return n&&(s=s.replace(/\/v+\d*/,"/v".concat(n))),s},O=e=>{let{as:t}=(0,A.Ti)(e,!0)||{};return t},V=e=>e===d.h7.COURSE?"Course":e===d.h7.TESTSERIES?"Test Series":"NA",M={1:"PLUS",2:"TRIAL",5:"ICONIC",6:"COMBO"},N=()=>{(0,b.Z)("/","/")},F=()=>{window.history.back()},B=e=>e.startsWith("/classroom");var G=i(53565),X=i(11163),Q=i(52563),x=i(78189),J=i(75583),Y=i(14924),H=i(33831),K=class{setup(e,t){this.source="",this.totalWatchTime=0,this.playedDuration=0,this.classStartTime=0,this.dvr=!1,this.replay=!1,this.isLive=0,this.watchEventSent=!1,this.svEventSent=!1,this.svFifteenMinsEventSent=!1,this.watchEvent={},this.prevUACallTime=0,this.sendCurrentWatchApi=!1,this.classDetails=e,this.user=t}createWatchEvent(){var e,t,i,n,s,a,l,o,r;this.watchEvent.TOTAL_RUN_TIME=this.totalWatchTime,this.watchEvent.CURRENT_TIME=this.getCompleteWatchTime(this.dvr,this.replay),this.watchEvent.IS_LIVE=this.isLive,this.user&&(this.watchEvent.user_id=this.user.uid),this.classDetails.programme&&(this.watchEvent.collection_slug=this.classDetails.programme.slug,this.classDetails.author&&(this.watchEvent.user_uid=this.classDetails.author.uid)),this.watchEvent.goal_id=(null===(e=this.classDetails)||void 0===e?void 0:e.goalUid)||(null===(t=this.classDetails)||void 0===t?void 0:null===(i=t.goal)||void 0===i?void 0:i.uid)||(null===(n=this.classDetails)||void 0===n?void 0:null===(s=n.programme)||void 0===s?void 0:s.goalUid)||(null===(a=this.classDetails)||void 0===a?void 0:null===(l=a.programme)||void 0===l?void 0:null===(o=l.goal)||void 0===o?void 0:o.uid)||null,this.watchEvent.video_player_type=1===this.classDetails.classType?4:3,this.watchEvent.uid=this.classDetails.uid,this.watchEvent.player_type="normal",this.watchEvent.source=this.source,this.watchEvent.total_video_length=null===(r=this.classDetails)||void 0===r?void 0:r.videoDuration}constructor(){(0,Y.Z)(this,"setupFlags",()=>{this.watchEventSent=this.isWatchEventSent(),this.svEventSent=this.shouldSendSVEvent(),this.svFifteenMinsEventSent=this.shouldSendSVEventFifteenMins()}),(0,Y.Z)(this,"isWatchEventSent",()=>{if((0,Q.V)()){var e;let t=localStorage.getItem("liveSessionsWatchEventSent[".concat(null===(e=this.classDetails)||void 0===e?void 0:e.uid,"]"));return![void 0,"undefined"].includes(t)&&JSON.parse(t)}return this.totalWatchTime>600}),(0,Y.Z)(this,"shouldSendWatchEvent",()=>this.totalWatchTime>600),(0,Y.Z)(this,"shouldSendSVEvent",()=>this.totalWatchTime>=300),(0,Y.Z)(this,"shouldSendSVEventFifteenMins",()=>this.totalWatchTime>=900),(0,Y.Z)(this,"getCompleteWatchTime",(e,t)=>{let i=0;return t?i=this.playedDuration-this.classStartTime:(i=this.classStartTime?new Date().getTime()/1e3-this.classStartTime/1e3:0,e&&(i=this.playedDuration?this.playedDuration:i)),parseInt(i.toFixed(2),10)}),(0,Y.Z)(this,"sendUaWatch",e=>{this.createWatchEvent(),this.prevUACallTime=x.Z.watchEventCallback(this.totalWatchTime,this.watchEvent,this.prevUACallTime,!1,e),1===this.totalWatchTime&&(x.Z.oneSecWatched(this.watchEvent),this.sendLessonPlay())}),(0,Y.Z)(this,"sendAnalyticsEvent",(e,t)=>(0,H.pp)(e,t)),(0,Y.Z)(this,"getEventData",()=>{var e,t,i,n,s,a,l,o,r,u,d,c,v,h,m,p,f,g,E;return{"Lesson ID":this.classDetails.uid,"Is Plus":!0,"Goal Id":(null===(e=this.classDetails.programme)||void 0===e?void 0:null===(t=e.goal)||void 0===t?void 0:t.uid)||(null===(i=this.classDetails.programme)||void 0===i?void 0:null===(n=i.goal)||void 0===n?void 0:null===(s=n.topology)||void 0===s?void 0:s.uid),"Goal Name":(null===(a=this.classDetails.programme)||void 0===a?void 0:null===(l=a.goal)||void 0===l?void 0:l.name)||(null===(o=this.classDetails.programme)||void 0===o?void 0:null===(r=o.goal)||void 0===r?void 0:null===(u=r.topology)||void 0===u?void 0:u.name),"Is Special":null===(d=this.classDetails.programme)||void 0===d?void 0:d.isSpecial,"Learner Username":null===(c=this.user)||void 0===c?void 0:c.username,"Learner Id":null===(v=this.user)||void 0===v?void 0:v.uid,user_id:null===(h=this.user)||void 0===h?void 0:h.uid,"User Id":null===(m=this.user)||void 0===m?void 0:m.uid,Time:new Date().getTime(),"Course Id":null===(p=this.classDetails.programme)||void 0===p?void 0:p.uid,"Course Name":null===(f=this.classDetails.programme)||void 0===f?void 0:f.name,"Educator Username":null===(g=this.classDetails.author)||void 0===g?void 0:g.username,"Educator Id":null===(E=this.classDetails.author)||void 0===E?void 0:E.uid}}),(0,Y.Z)(this,"sendLessonPlay",()=>{this.sendAnalyticsEvent("Lesson Play",{"Lesson Duration":this.classDetails.lessonDuration,Source:"Direct","Lesson Start Mode":"UserPlay",...this.getEventData()})}),(0,Y.Z)(this,"sendSV",()=>{this.shouldSendSVEvent()&&!this.svEventSent&&(this.svEventSent=!0,this.sendAnalyticsEvent("Successful View",this.getEventData()))}),(0,Y.Z)(this,"sendSubscriptionCardVisibleEventOnIframe",()=>{this.sendAnalyticsEvent("Special Class: Live subscription nudge",{"Lesson Duration":this.classDetails.lessonDuration,Source:"Direct","Lesson Start Mode":"UserPlay","Last Primary Source":"Special Class Live",...this.getEventData()})}),(0,Y.Z)(this,"sendSubscriptionClickedOnIframe",()=>{this.sendAnalyticsEvent("Plus: Get Subscription",{"Lesson Duration":this.classDetails.lessonDuration,Source:"Direct","Lesson Start Mode":"UserPlay","Last Primary Source":"Special Class Live",...this.getEventData()})}),(0,Y.Z)(this,"sendSVFifteenMins",()=>{this.shouldSendSVEventFifteenMins()&&!this.svFifteenMinsEventSent&&(this.svFifteenMinsEventSent=!0,this.sendAnalyticsEvent("Successful View Fifteen Minutes",this.getEventData()))}),(0,Y.Z)(this,"sendCurrentWatch",e=>{this.getCompleteWatchTime(this.dvr,this.replay)>=10&&!this.sendCurrentWatchApi&&(this.sendCurrentWatchApi=!0,e&&e())}),(0,Y.Z)(this,"sendLessonWatched",e=>{let t=this.isWatchEventSent(),i=this.shouldSendWatchEvent();i&&!t&&e&&e()}),(0,Y.Z)(this,"unmount",()=>{if(this.watchEvent&&Object.keys(this.watchEvent).length){var e,t,i;this.createWatchEvent(),(null===(e=this.watchEvent)||void 0===e?void 0:e.TOTAL_RUN_TIME)&&(null===(t=this.watchEvent)||void 0===t?void 0:t.uid)&&(null===(i=this.watchEvent)||void 0===i?void 0:i.user_uid)&&x.Z.unmountChanges(this.watchEvent)}this.watchEvent={}})}},j=class{constructor(){(0,Y.Z)(this,"setup",e=>{this.init(),this.listeners={},this.isExternal=e}),(0,Y.Z)(this,"init",()=>{window.addEventListener?window.addEventListener("message",this.listener,!1):window.attachEvent("onmessage",this.listener)}),(0,Y.Z)(this,"addListener",(e,t)=>{this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}),(0,Y.Z)(this,"callMethod",()=>{}),(0,Y.Z)(this,"cleanup",()=>{window.removeEventListener?window.removeEventListener("message",this.listener,!0):window.detachEvent("onmessage",this.listener),this.listeners={}}),(0,Y.Z)(this,"listener",e=>{if(e&&e.data){this.isExternal&&window.parent&&window.parent!==window&&window.parent.postMessage(e.data,"*");let{event:t}=e.data,i="UPDATE_CLASS_START_TIME"===t?e.data.status.currentTime:"WATCHED"===t?e.data.status.playedDuration:0,n=e.data&&e.data.status&&e.data.status.isReplay,s=e.data&&e.data.status&&e.data.status.isLiveDVR,a=e.data&&e.data.status&&e.data.status.isLive,l=!1;"pause"===t?l=!1:"play"===t&&(l=!0),("pause"===t||"play"===t)&&(t="playing"),this.listeners[t]&&Object.keys(this.listeners[t]).forEach(e=>{this.listeners[t][e](t,l,i,n,s,a)})}})}};let q=new K,$=new J.Z,z=new j,ee=()=>{let e=(0,X.useRouter)(),{query:t}=e,i=(0,C.Z)(L.jo),{currentClassData:n}=(0,G.Z)(),a=(0,W.ZP)(U.cn),l=(null==t?void 0:t.external)==="1",o=()=>(0,m.mV)(n.uid),r=async()=>{(0,m.um)(n.uid).then(e=>{!e.error&&(0,Q.V)()&&localStorage.setItem("liveSessionsWatchEventSent[".concat(n.uid,"]"),!0)})},u=(0,s.useCallback)(()=>{q.source=n.source,q.totalWatchTime=(0,Q.V)()&&parseInt(localStorage.getItem("liveSessions[".concat(n.uid,"]")),10)||0,$.setSeconds(q.totalWatchTime),q.setupFlags()},[n.uid,n.source]),d=(0,s.useCallback)(e=>{if(q.totalWatchTime=e,(0,Q.V)()){var t;localStorage.setItem("liveSessions[".concat(n.uid,"]"),q.totalWatchTime),(null==n?void 0:null===(t=n.programme)||void 0===t?void 0:t.isSpecial)&&localStorage.setItem("freeTimeRemaining",parseInt(localStorage.getItem("freeTimeRemaining"),10)-1)}q.sendUaWatch(a),q.sendSV(),q.sendSVFifteenMins(),q.sendCurrentWatch(o),q.sendLessonWatched(r)},[n.uid,a]),c=(0,s.useCallback)(()=>{$.totalSeconds+=1,d($.totalSeconds)},[d]),v=(0,s.useCallback)(()=>{q.watchEvent={},q.prevUACallTime=0,$.end(),q.watchEvent.BROWSER_ID=_.ZP.readCookie("BROWSER_ID")?_.ZP.readCookie("BROWSER_ID"):x.Z.setBrowserId(),q.watchEvent.PLAYER_ID=x.Z.setPlayerId()},[]),h=(0,s.useCallback)(()=>{z.addListener("finished",()=>{$.end()}),z.addListener("WATCHED",(e,t,i,n,s,a)=>{q.playedDuration=i,q.dvr=s,q.replay=n,q.isLive=a}),z.addListener("UPDATE_CLASS_START_TIME",(e,t,i,n,s,a)=>{q.classStartTime=i,q.dvr=s,q.replay=n,q.isLive=a}),z.addListener("playing",(e,t)=>{t?$.started?$.resume(c):$.start(c):$.pause()})},[c]),p=(0,s.useCallback)(()=>{z&&z.cleanup(),$&&$.end(),q&&q.unmount()},[]),f=(0,s.useCallback)(e=>{q.setup(e,i)},[i]),g=(0,s.useCallback)(()=>{$.setup(q.totalWatchTime)},[]),E=(0,s.useCallback)(()=>{z.setup(l)},[l]),{sendSubscriptionCardVisibleEventOnIframe:S,sendSubscriptionClickedOnIframe:w}=q;return{player:q,viewer:z,clock:$,setupPlayer:f,setupClock:g,setupViewer:E,setWatchTime:u,setViewer:h,setupForUa:v,cleanupPlayerEvents:p,sendSubscriptionCardVisibleEventOnIframe:S,sendSubscriptionClickedOnIframe:w}};var et=i(9267),ei=i(91159),en=i(57274),es=i(61800);let ea=()=>{var e,t;let i=(0,C.Z)(ei.oT),{currentClassData:n}=(0,G.Z)(),a=null===(e=n.programme)||void 0===e?void 0:null===(t=e.goal)||void 0===t?void 0:t.uid,{subscription:l={},timeRemaining:o=0}=(0,et.wW)(i,a)||es.FD,{type:r,duration:u="NA"}=l,d=(0,s.useCallback)(e=>{var t,i,s,l;en.Z.sendEvent(e,{is_enrolled:(null===(t=n.programme)||void 0===t?void 0:t.isEnrolled)||!1,is_special:(null===(i=n.programme)||void 0===i?void 0:i.isSpecial)||!1,is_saved:n.isSaved||!1,programme_type:V(n.programmeType),goal_uid:a||"NA",goal_name:(null===(s=n.programme)||void 0===s?void 0:null===(l=s.goal)||void 0===l?void 0:l.name)||"NA",subscription_type:M[r]||"NA",subscription_duration:u,is_subscription_active:o>0,last_primary_source_section:w.Z.getItem("lpss","NA")})},[n.uid,i]);return d},el=e=>{var t,i,n;let{iframeRef:a,internalFrame:l}=e,o=(0,v.Z)(h.SD),r=(0,v.Z)(h.q1),c=(0,_.vQ)("accessToken"),b=(0,p.Z)(f.lQ),{isPlayerLoaded:A,currentClassData:R,setPlayerLoaded:V,setCurrentClassData:M,setIsClassPage:X,isClassPage:Q}=(0,G.Z)(),{closeElement:x,isOpen:J}=(0,u.F7)(d.UV.COURSE_CLASS_PLAYER),[Y,H]=(0,s.useState)(0),[K,j]=(0,s.useState)("about:blank"),[q,$]=(0,s.useState)({}),z=ea(),{setupPlayer:et,setupClock:ei,setupViewer:en,setWatchTime:es,setViewer:el,setupForUa:eo,cleanupPlayerEvents:er,sendSubscriptionCardVisibleEventOnIframe:eu,sendSubscriptionClickedOnIframe:ed,clock:ec,player:ev}=ee(),eh=(0,y.Xm)(),em=(null==R?void 0:null===(t=R.programme)||void 0===t?void 0:null===(i=t.goal)||void 0===i?void 0:i.uid)||eh,ep=(0,C.Z)(L.Fc),ef=(0,C.Z)((0,L.tj)(em)),eg=(0,s.useRef)(null),eE=(0,W.ZP)((0,U.Cj)(em)),{open:eS}=(0,T.Z)(),[e_,ew,eT,eD]=(0,g.Z)(null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.href,["external","clxVersion","ext_token","isSyllabusFeed"]),eZ="1"===e_,ey="true"===eD;async function eC(e){var t;eE&&ef&&eg.current===I.WS.TEST_1&&(null==R?void 0:null===(t=R.programme)||void 0===t?void 0:t.isSpecial)&&eS(em,R.uid,e)}let eL=e=>{var t,i;null===(t=a.current)||void 0===t||null===(i=t.contentWindow)||void 0===i||i.postMessage(e,"*")},eI=()=>{eL({iframeClosed:!0})},eW=()=>{eL({iframeMoved:!0})},eU=e=>{eL({lessonData:e,isDarkModeOn:r,apiHost:"https://unacademy.com/api/".slice(0,-1),isEmbeddedPlayer:l,shouldAutoplay:!l,isClassPage:Q})},eb=()=>{let e={accessToken:c,data:q,showBackButton:!0,role:"listener",user_name:"",explicitJWTToken:eT,isExternal:eZ,syllabusFeed:ey,isClassPage:Q};q.videoUrl&&q.state===d.A_.PAST?eU({...e,replay:"true",url:q.videoUrl}):eU(e)},eA=()=>{x(),$({}),M({}),er()},eR=()=>{eI(),eA(),H(e=>e+1),F()},eP=()=>{er(),et(q),ei(),en(),eW(),eb(),es(),el(),eo()},ek=(0,E.Z)(S.z),eO=()=>{ek(R.uid)},eV=()=>{w.Z.deleteItem("lpss"),eO(),eI(),eA()},eM=()=>{eV();let e=window.location.pathname;if(B(e)){N();return}F()};return(0,s.useEffect)(()=>{if(R.uid){let e=P(R),t=k(e,b,eZ,ew);K!==t&&(j(t),V(!1)),$(e)}},[R.uid,b]),(0,s.useEffect)(()=>{q.uid&&A&&eP()},[A,q.uid]),(0,s.useEffect)(()=>{if(!J)return;let e=e=>{if(e.data.subscriptionCardVisibleOnIframe&&eu(),e.data.getSubscriptionClickedOnIframe&&ed(),e.data.liveClassReady&&V(!0),e.data.isFeedbackData&&(0,m.HQ)(e.data.feedbackData),e.data.closeIframe&&(eC(e.data.isFiveMinSV),eM()),e.data.isNextLessonClicked){let t={...e.data.nextLesson,type:"post"},i=O(t,!0);window.open(i,"_self")}if(e.data.reloadIframe&&eR(),e.data.setDarkModeOn&&o(e.data.setDarkModeOn.shouldSet),e.data.segmentEvents){let n=null==ev?void 0:ev.watchEvent.PLAYER_ID;n&&(e.data.eventData.data.player_id=n),z(e.data.eventData)}e.data.forwardToCLX&&eL(e.data)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[J]),(0,s.useEffect)(()=>{if(!J)return;let e=()=>{eC(!0),eV()};return window.addEventListener("popstate",e,!1),()=>{window.removeEventListener("popstate",e)}},[J]),(0,s.useEffect)(()=>()=>{eA(),er(),X(!1)},[]),(0,s.useEffect)(()=>{var e;eE&&ef&&(null==R?void 0:null===(e=R.programme)||void 0===e?void 0:e.isSpecial)&&(0,Z.d)(D.xz,ep).then(e=>{eg.current=e.variation})},[R,ef,eE,ep]),{key:"".concat(K,"_").concat(Y),urlToLoad:K,currentClassData:R,clock:ec,onBackCleanup:eV}};var eo=i(59937),er=i(7273),eu=i(69124),ed=i(42298),ec=i(74869),ev=i(9685);let eh=(0,c.Z)(()=>i.e(17158).then(i.bind(i,17158))),em=(0,a.default)(r,{target:"e6uqhcr0",label:"Wrapper"})("position:fixed;left:0;top:0;height:100vh;width:100vw;z-index:",d.kg.PLAYER,";"),ep=e=>{let{internalFrame:t=!1}=e,i=(0,s.useRef)(null),{key:a,urlToLoad:l,currentClassData:o,clock:r,onBackCleanup:c}=el({iframeRef:i,internalFrame:t}),{isOpen:v}=(0,u.F7)(d.UV.COURSE_CLASS_PLAYER),{timeConsumed:h,timeConsumedBeforePlaying:m,handleBackOnBlocker:p,handleTimeBlockerView:f,handleGetSubscription:g,handleGotIt:E,isBlockerOpen:S}=function(e,t,i){var n;let a=(0,s.useRef)(null),[l,o]=(0,s.useState)(!1),[r,d]=(0,s.useState)(!1),c=(0,er.ZP)((0,eu.d)("limiting_consumption_app")),v=c&&c===I.WS.TEST_1,{classroomConsumption:h}=(0,ec.Z)(),m=(0,ev.Q)(null==h?void 0:h.data),p=(0,C.Z)(L.Up),f=(0,s.useRef)(null),{goal:g}=(null===(n=f.current)||void 0===n?void 0:n.programme)||{goal:{}};(0,s.useEffect)(()=>{t.programme&&(f.current=t)},[t]);let{isOpen:E,closeElement:S,openElement:_}=(0,u.F7)(D.ab),w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(!0),e||eo.EX.track(D.$n,{goal_name:g.name,goal_uid:g.uid,value_offering:"Watchtime",value_offering_cap:"60 minutes"})},T=()=>{S(),d(!0),eo.EX.track(D.ve,{goal_name:g.name,goal_uid:g.uid})},Z=()=>{S(),eo.EX.track(D.ED,{goal_name:g.name,goal_uid:g.uid,value_offering:"Watchtime",value_offering_cap:"60 minutes"})},y=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{author:t}=f.current;if(o(!0),i(),_(),!e&&(eo.EX.track(D.ZV,{goal_name:g.name,goal_uid:g.uid,educator_uid:t.uid,educator_username:t.username,value_offering:"Watchtime",value_offering_cap:"60 minutes"}),(0,Q.V)())){let n;let s=(0,ed.Z)(new Date,"dd.MM.yyyy"),a="limit exhausted-".concat(p),l=localStorage.getItem(a);if(null===l)n={date:s,count:1};else{let{date:r,count:u}=JSON.parse(l);s!==r&&(n={date:s,count:u+1})}n&&localStorage.setItem(a,JSON.stringify(n)),n&&n.count>=2&&eo.EX.track(D.s3,{goal_name:g.name,goal_uid:g.uid,value_offering:"Watchtime",value_offering_cap:"2"})}},W=()=>{r?w():y()},U=()=>{eo.EX.track(D.$T,{goal_name:g.name,goal_uid:g.uid,banner_type:r?"Bottom Sheet":"CLX Screen",value_offering:"Watchtime",value_offering_cap:"60 minutes"}),(0,b.Z)("/goal/[goalSlug]/[goalUID]/subscribe","/goal/".concat(g.slug,"/").concat(g.uid,"/subscribe"),{},"goal")};return(0,s.useEffect)(()=>(v&&null!==m&&(m<=0?w(!0):a.current||(a.current=setInterval(()=>{let t=(0,Q.V)()?localStorage.getItem("freeTimeRemaining"):0;e.started&&e.totalSeconds>=0&&0>=parseInt(t,10)&&(y(!0),clearInterval(a.current),a.current=null)},2e3))),()=>{a.current&&(clearInterval(a.current),a.current=null)}),[v,m,f]),{timeConsumed:l,timeConsumedBeforePlaying:r,handleBackOnBlocker:T,handleGotIt:Z,handleGetSubscription:U,handleTimeBlockerView:W,isBlockerOpen:E}}(r,o,c);if((h||m)&&S)return(0,n.tZ)(eh,{fullScreen:!m,onBack:p,onGotIt:E,onMount:f,onSubscribe:g});let _="fullscreen; camera; microphone;";return t||(_+="autoplay;"),(0,n.tZ)(em,{active:v,direction:"up",children:(0,n.tZ)("iframe",{id:"nativeIframeOne",src:l,ref:i,webkitallowfullscreen:"true",allowFullScreen:"allowfullscreen",width:"100%",height:"100%",allow:_,frameBorder:"no",title:"Class"},a)})};var ef=ep},62378:function(e,t,i){i.d(t,{$T:function(){return o},$n:function(){return s},ED:function(){return l},Qs:function(){return u},ZV:function(){return n},ab:function(){return d},s3:function(){return r},ve:function(){return a},xz:function(){return c}});let n="Daily Limit - Blocker Viewed",s="Daily Limit - Bottom Sheet Viewed",a="Daily Limit - CLX Blocker Dismissed",l="Daily Limit - Got it Clicked",o="Daily Limit - Get subscription clicked",r="Daily Limit - Limit Exhausted",u=["JAQRK","QGFRK","PZSIU","NVLIA","PESHE","YAHCG","WKOGR","VIDUE","JIWEO","KSCGY","TMUVD","VLEMN","YOTUH","LVECA","RTPSX","ZIUBD","GNFFE","SDDOC","TEWDQ","IEIJT","XTKHH","RXRWJ","TUNWK","RJVOD","PLWCX","RUJGA","BBKWG","XNDUS","QOIVT","CKTCQ","GWDPV","ZYCWC","DANNJ","GSZGO","JWBRG","UQCMN","BIZXQ","SCTBY","EJTZD","TPSBK","GWDPZ","BDNTN","XCTVJ","ZISFF","WKQWQ","NYHNH","QKHZF","SCANJ","QJEJG","GMXMZ","SUVLV","MRZFY","SIFWL","FDGQK","PPPOX","KNMDN","RYNDN","FIYVI","SASYW","TICPI","GUVHW","EUDWC","JUYYX","BVHCS","LFUWW","TZNQX","RJDNO","XFOIT","KVBFU","CVGGX","TNOJW","WWKAS","ZDYHU","UMTAN","LOPPY"],d="CLASS_BLOCKER_ID",c="web_post_class_recommendation_ab"},53565:function(e,t,i){var n=i(59148),s=i(14671);let a={isPlayerLoaded:!1,currentClassData:{},isClassPage:!1},l=e=>({setPlayerLoaded:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e(e=>({...e,isPlayerLoaded:t}))},setCurrentClassData:t=>e(e=>({...e,currentClassData:t})),setIsClassPage:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e(e=>({...e,isClassPage:t}))}}),o=(0,n.Z)(e=>({...a,...l(e)})),r=(0,s.Z)(o),u=()=>{let e=r(e=>e.currentClassData),t=r(e=>e.isPlayerLoaded),i=r(e=>e.isClassPage),n=r(e=>e.setCurrentClassData),s=r(e=>e.setPlayerLoaded),a=r(e=>e.setIsClassPage);return{isPlayerLoaded:t,currentClassData:e,setCurrentClassData:n,setPlayerLoaded:s,setIsClassPage:a,isClassPage:i}};t.Z=u},22995:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(66331),s=i(46776),a=i(14671);let l=(0,a.Z)(e=>({content:null,setContent:t=>e({content:t})}));function o(){let{isOpen:e,openElement:t,closeElement:i}=(0,n.F7)(s.eW),a=l(e=>e.content),o=l(e=>e.setContent);return{isOpen:e,data:a,open:function(e,i,n){o({goalUID:e,classUID:i,is5minSV:null==n||n}),t()},close:function(){o(null),i()}}}},75583:function(e,t,i){var n=i(14924);t.Z=class{setup(e){this.totalSeconds=parseInt(e,10),this.started=!1,this.interval=null}constructor(){(0,n.Z)(this,"setSeconds",e=>{this.totalSeconds=parseInt(e,10)||0}),(0,n.Z)(this,"start",e=>{this.started=!0,this.interval=setInterval(e,1e3)}),(0,n.Z)(this,"pause",()=>{clearInterval(this.interval),delete this.interval}),(0,n.Z)(this,"resume",e=>{this.interval||this.start(e)}),(0,n.Z)(this,"end",()=>{this.totalSeconds=0,this.started=!1,clearInterval(this.interval),delete this.interval})}}},57274:function(e,t,i){var n=i(14924),s=i(59937);class a{}(0,n.Z)(a,"sendEvent",(e,t)=>{let i={...t};(null==e?void 0:e.data)&&(i={...i,...e.data}),(null==e?void 0:e.name)&&s.EX.track(e.name,i)}),t.Z=a},51197:function(e,t){t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let i=new URL(e);return t.map(e=>i.searchParams.get(e))}catch(n){return[]}}},78189:function(e,t,i){i.d(t,{Z:function(){return P}});var n=i(54083),s=i(58940),a=i(1622),l=i(95758),o=i(57207),r=i(70347),u=i(57131),d=i(30310);let c="https://data.unacademy.com",v=[],h=null,m=(e,t,i)=>({user_id:i,event:e,...t,time:Date.now(),value:1}),p=async()=>{(0,d.ZP)();let e={accesstoken:"kfh2kjhfiwewdsdsd",authorization:"Bearer OK","device-token":(0,s.vQ)("accessToken")||"","Content-Type":"application/json"},t=[...v];if(t.length&&(v=[],h=clearTimeout(h),c)){let i=await (0,r.Z)("".concat(c,"/counts"),{headers:e,useCamelCase:!1,requestType:"PUT",body:{events:t}});i.error&&(0,l.T)(new a.B$(i.error))}},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",i=["uid","user_uid","PLAYER_ID","BROWSER_ID","TOTAL_RUN_TIME"];for(let n=0;n<i.length;n+=1)e[i[n]]||(t+="".concat(i[n],", "));return t.replace(/, $/,"")},g=e=>{let t=f(e);return t.length?((0,l.T)(new a.B$("Missing fields from watch event at ".concat(window.location.href,". Missing Fields: ").concat(t))),!1):"string"!=typeof e.TOTAL_RUN_TIME||((0,l.T)(new a.B$("Invalid data found for watch event at ".concat(window.location.href))),!1)};async function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lesson_watch_status",t=arguments.length>1?arguments[1]:void 0,{getState:i}=(0,u.b)(),n="frontend_".concat(e),a=(0,s.vQ)("anonymous_session_id")||"",l={...t,session_id:a};if("frontend_lesson_watch_status"===n&&!g(l))return;let r=m(n,l,(0,o.Up)(i()));v.push(r),h=setTimeout(p,300)}let S=(e,t)=>{E(e,t)},_=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{force:!0};S(e,t,i)},w=e=>{if(!e)return(0,l.T)(new a.B$("Null Watch Event Detected at: ".concat(window.location.href)));_("lesson_watch_status",e)},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0};_("player_watch_end",e,t)},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0};_("player_video_watch",e,t)},Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0};_("video_view",e,t)},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0};_("player_watch_start",e,t)},C=e=>{T(e,{force:!1}),D(e)},L=()=>Math.floor((1+Math.random())*65536).toString(16).substring(1),I=()=>"".concat(L()+L(),"-").concat(L(),"-").concat(L(),"-").concat(L(),"-").concat(L()).concat(L()).concat(L()),W=e=>{Z(e),y(e,{force:!0})},U=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;return n||e>=10&&e>i+s?(t.TOTAL_WATCH_TIME_END=e-i,C(t),w(t),e):i},b=e=>{U(e.TOTAL_RUN_TIME,e),w(e)},A=()=>{let e=I();return s.ZP.setCookie("BROWSER_ID",e,3024e3),e},R=()=>{let e=(0,n.Z)();return e};var P={setPlayerId:R,setBrowserId:A,unmountChanges:b,watchEventCallback:U,oneSecWatched:W,sendUa:S}}}]);
//# sourceMappingURL=9703-b01df2e05fd031b9.js.map